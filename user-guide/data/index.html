<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Loading Data - WekaDeeplearning4j</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Loading Data";
    var mkdocs_page_input_path = "user-guide/data.md";
    var mkdocs_page_url = "/user-guide/data/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> WekaDeeplearning4j</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../install/">Installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">User Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../getting-started/">Getting Started</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Loading Data</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#loading-data">Loading Data</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#defaultinstanceiterator">DefaultInstanceIterator</a></li>
        
            <li><a class="toctree-l4" href="#convolutioninstanceiterator">ConvolutionInstanceIterator</a></li>
        
            <li><a class="toctree-l4" href="#imageinstanceiterator">ImageInstanceIterator</a></li>
        
            <li><a class="toctree-l4" href="#textembeddinginstanceiterator">TextEmbeddingInstanceIterator</a></li>
        
            <li><a class="toctree-l4" href="#textfilesembeddinginstanceiterator">TextFilesEmbeddingInstanceIterator</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#caching">Caching</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../rnns/">Recurrent Neural Networks</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Examples</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../examples/classifying-iris/">Classifying the Iris Dataset</a>
                </li>
                <li class="">
                    
    <a class="" href="../../examples/classifying-mnist/">Classifying the MNIST Dataset</a>
                </li>
                <li class="">
                    
    <a class="" href="../../examples/classifying-imdb/">Classifying the IMDB Dataset</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../troubleshooting/">Troubleshooting</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">WekaDeeplearning4j</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>User Guide &raquo;</li>
        
      
    
    <li>Loading Data</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/Waikato/wekaDeeplearning4j/edit/master/docs/user-guide/data.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="loading-data">Loading Data</h1>
<p>The package provides so called <code>InstanceIterators</code> to load the given dataset in a correct shape. Each iterator allows to set a batch size which refer to the mini batches used for training a network. The following explains for which dataset and network type which iterator is necessary.</p>
<h2 id="defaultinstanceiterator">DefaultInstanceIterator</h2>
<p>The <code>DefaultInstanceIterator</code> assumes your dataset is of the following shape</p>
<pre><code>@RELATION iris

@ATTRIBUTE sepallength  REAL
@ATTRIBUTE sepalwidth   REAL
@ATTRIBUTE petallength  REAL
@ATTRIBUTE petalwidth   REAL
@ATTRIBUTE class        {Iris-setosa,Iris-versicolor,Iris-virginica}

@DATA
5.1,3.5,1.4,0.2,Iris-setosa
4.9,3.0,1.4,0.2,Iris-setosa
4.7,3.2,1.3,0.2,Iris-setosa
...
</code></pre>

<p>that is, each row is represented as a vector without further interpretation
and you want to build a simple dense network of the form</p>
<pre><code>DenseLayer -&gt; DenseLayer -&gt; ... -&gt; OutputLayer
</code></pre>

<h2 id="convolutioninstanceiterator">ConvolutionInstanceIterator</h2>
<p>To use convolutional neural networks in the case of a more sophisticated dataset, where the ARFF file represents column-wise flattened image pixels as e.g.:</p>
<pre><code>@RELATION hotdog-3x3

@ATTRIBUTE pixel00  REAL
@ATTRIBUTE pixel01  REAL
@ATTRIBUTE pixel02  REAL
@ATTRIBUTE pixel10  REAL
@ATTRIBUTE pixel11  REAL
@ATTRIBUTE pixel12  REAL
@ATTRIBUTE pixel20  REAL
@ATTRIBUTE pixel21  REAL
@ATTRIBUTE pixel22  REAL

@ATTRIBUTE class    {hotdog, not-hotdog}

@DATA
127,32,15,234,214,144,94,43,23,hotdog
52,14,244,232,241,11,142,211,211,not-hotdog
...
</code></pre>

<p>it is necessary to set the iterator to <code>ConvolutionInstanceIterator</code>. </p>
<p>Available parameters:</p>
<ul>
<li><code>height</code>: Height of the images</li>
<li><code>width</code>: Width of the images</li>
<li><code>numChannels</code>: Depth of the image (e.g.: RGB images have a depth of 3, whereas Greyscale images have a depth of 1)</li>
</ul>
<h2 id="imageinstanceiterator">ImageInstanceIterator</h2>
<p>If the dataset consists of a set of image files it is necessary to prepare a meta data ARFF file in the following format:</p>
<pre><code>@RELATION mnist.meta.minimal

@ATTRIBUTE filename string
@ATTRIBUTE class {0,1,2,3,4,5,6,7,8,9}

@DATA
img_12829_0.jpg,0
img_32870_0.jpg,0
img_28642_0.jpg,0
...
</code></pre>

<p>This file informs the internals about the association between the image files and their labels. Additionally it is mandatory to set the iterator to <code>ImageInstanceIterator</code>. </p>
<p>Available parameters:</p>
<ul>
<li><code>height</code>: Height of the images</li>
<li><code>width</code>: Width of the images</li>
<li><code>numChannels</code>: Depth of the image (e.g.: RGB images have a depth of 3, whereas Greyscale images have a depth of 1)</li>
<li><code>imagesLocation</code>: The absolute path to the location of the images listed in the meta-data ARFF file</li>
</ul>
<h2 id="textembeddinginstanceiterator">TextEmbeddingInstanceIterator</h2>
<p>If you are going to process text data, it is usually necessary to project the documents into an embedding space. This means, each token (e.g. a word) is mapped with the help of an embedding into a certain feature space. That is, each document will then contain a series of vectors, where each vector represents a token in the embedding space. The <code>TextEmbeddingInstanceIterator</code> accepts datasets containing a document and a class as shown below:</p>
<pre><code>@RELATION 'imdb-reviews'

@ATTRIBUTE review string
@ATTRIBUTE class-att {pos,neg}

@data
&quot;Prince stars as the Kid in this semi-autobiographical film ...&quot;,pos
&quot;I just saw Behind Bedroom Doors and this was the first ...&quot;,neg
...
</code></pre>

<p>Available parameters:</p>
<ul>
<li><code>wordVectorLocation</code>: File which provides the iterator with a serialized word embedding</li>
<li><code>stopWords</code>: Stopword strategy to filter unnecessary words</li>
<li><code>tokenizerFactory</code>: Defines how tokens are created</li>
<li><code>tokenPreProcess</code>: Defines how tokens are preprocessed</li>
<li><code>truncateLength</code>: Maximum number of words per document</li>
</ul>
<h2 id="textfilesembeddinginstanceiterator">TextFilesEmbeddingInstanceIterator</h2>
<p>This iterator extends the <code>TextEmbeddingInstanceIterator</code> and allows the use of distributed documents that are not collected in a single ARFF file. Similar to the <code>ImageInstanceIterator</code>, this iterator is applicable to an ARFF file containing the meta data, such as:</p>
<pre><code>@RELATION 'imdb-reviews'

@ATTRIBUTE document-path string
@ATTRIBUTE class-att {pos,neg}

@data
review_0.txt,pos
review_1.txt,neg
...
</code></pre>

<p>Available parameters:</p>
<ul>
<li><code>wordVectorLocation</code>: File which provides the iterator with a serialized word embedding</li>
<li><code>stopWords</code>: Stopword strategy to filter unnecessary words</li>
<li><code>tokenizerFactory</code>: Defines how tokens are created</li>
<li><code>tokenPreProcess</code>: Defines how tokens are preprocessed</li>
<li><code>truncateLength</code>: Maximum number of words per document</li>
<li><code>textsLocation</code>: The absolute path to the location of the text files listed in the meta data ARFF file</li>
</ul>
<h1 id="caching">Caching</h1>
<p>The iterators allow to choose between three modes of caching:</p>
<ul>
<li><code>NONE</code>: disable caches</li>
<li><code>MEMORY</code>: cache the generated mini batches in memory</li>
<li><code>FILESYSTEM</code>: cache the generated mini batches in the filesystem (in your system's temporary directory)</li>
</ul>
<p>The cache will be built up in the first epoch. For further epochs, the batches do not need to be recomputed but are read from the cache. This might help if the batch generation is computation intensive.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rnns/" class="btn btn-neutral float-right" title="Recurrent Neural Networks">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../getting-started/" class="btn btn-neutral" title="Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/Waikato/wekaDeeplearning4j/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../getting-started/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../rnns/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
